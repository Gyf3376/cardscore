# CardScore - 扑克计分专家

微信小程序版扑克记账工具，帮助扑克玩家实时记录和管理游戏得分。

## 功能特性

- 🔐 微信授权登录
- 🏠 创建/加入游戏房间
- 👥 支持3人或4人对局
- 🎮 实时积分榜展示
- 📝 智能记分系统（自动计算炸弹费、被关罚分等）
- 📊 对局流水记录
- 📋 游戏规则说明

## 项目结构

```
miniprogram/
├── app.ts                 # 小程序入口文件
├── app.json              # 小程序配置文件
├── app.wxss              # 全局样式
├── app.d.ts              # 全局类型定义
├── project.config.json   # 项目配置
├── tsconfig.json         # TypeScript 配置
├── sitemap.json          # 站点地图
├── types.ts              # 类型定义
├── utils.ts              # 工具函数
├── pages/                # 页面
│   ├── auth/             # 授权登录页
│   ├── room/             # 房间页（创建/加入/等待）
│   ├── game/             # 游戏主页面
│   ├── history/          # 历史记录页
│   └── rules/            # 规则说明页
├── components/           # 组件
│   └── round-modal/      # 记分弹窗组件
└── assets/               # 资源文件
    └── icons/            # 图标
```

## 开发指南

### 环境要求

- Node.js >= 16
- 微信开发者工具
- TypeScript

### 安装依赖

```bash
npm install
```

### 开发步骤

1. 打开微信开发者工具
2. 导入项目，选择 `miniprogram` 目录
3. 填写你的 AppID（可以使用测试号）
4. 点击"编译"即可运行

### TypeScript 支持

项目已配置 TypeScript 支持，使用 `@types/wechat-miniprogram` 类型库。

## 游戏规则

### 基本规则
- 人数：3人（需3张3）或4人（需4张3），不含大小王
- 牌级：3 > 2 > 1 > K > Q > J > 10 > 9 > 8 > 7 > 6 > 5 > 4
- 红桃4：首局由持有红桃4玩家先出，且首发牌型必须包含红桃4
- 必打规则：若有大过的牌必须出，不能不要

### 牌型说明
- 炸弹：四张相同（4张4除外）。炸弹不能空炸，必须打过其他牌
- 三带二：三张相同必须带两张（相同或不同皆可），无飞机
- 顺子：3人最短5连，4人最短4连。顺子不能包含1, 2, 3

### 结算逻辑
- 单张豁免：最后剩余1张牌的不算输（支付0）
- 顶大规则：若下家报单，上家出单张必须出手中最大的一张
- 被关：若一局未出一张牌则为"被关"，结算剩余牌数翻倍
- 炸弹费：炸弹生效时，其他所有玩家需支付炸弹费给该玩家

## 数据存储

使用微信小程序本地存储 API：
- `wx.setStorageSync` / `wx.getStorageSync` - 存储用户信息和游戏状态

## 图标资源

使用 Lucide Icons，可以从 [https://lucide.dev/](https://lucide.dev/) 下载。

## 注意事项

1. 图标文件需要手动下载并放置到 `assets/icons/` 目录
2. 首次运行需要在 `project.config.json` 中配置正确的 AppID
3. 用户授权功能需要在小程序后台配置相应权限

## 许可证

MIT License
